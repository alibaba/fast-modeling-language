## 概述

FML(Fast Modeling Language)是面向建模人员进行设计，SQL作为一种结构化语言大部分建模人员都有基础。所以在设计FML的时候，最 主要的目标是面向SQL的语法结构。 另外也借鉴了MaxCompute、Hive部分语法的特定。做到90%兼容的特点。

## DDL差异

由于FML是一门建模语言，所以在语法设计上，尤其是DDL语句上，是带了建模的特有属性语法。以表为例，FML主要有以下语法差异：

- FML需要指定特定维度建模类型的表，比如创建维度表：CREATE DIM TABLE
- 常见的DDL语句中，只有表名和备注，在建模中还有中文名，使用ALIAS来表达。
- 为了支持模型扩展属性，每个DDL语句都支持类似Hive中property的定义，使用WITH (<param> = <value>)方式, param和value都需要单引号括起来。
- 关键字大小写不敏感

## 数据类型

FML的数据类型支持内置类型和自定义类型的表达式。内置类型包括如下：

| 类型        | 功能          |
|-----------|-------------|
| TINYINT   | TINYINT     | 
| SMALLINT  | SMALLINT    | 
| MEDIUMINT | MEDIUMINT   | 
| INT       | INT         | 
| BIGINT    | BIGINT      | 
| FLOAT     | FLOAT       | 
| DOUBLE    | DOUBLE      | 
| DECIMAL   | DECIMAL     | 
| CHAR      | CHAR        | 
| VARCHAR   | VARCHAR     | 
| STRING    | STRING      | 
| TEXT      | TEXT        | 
| BINARY    | BINARY      | 
| DATE      | DATE        | 
| DATETIME  | DATETIME    | 
| TIMESTAMP | TIMESTAMP   | 
| BOOLEAN   | BOOLEAN     | 
| ARRAY     | ARRAY<简单类型> | 
| MAP       | MAP         | 
| STRUCT    | STRUCT<>    | 
| JSON      | JSON格式类型    | 

除了内置类型外，FML还支持自定义数据类型的表达，可以使用如下的

## 关键字

FML中定义了不少自己的关键字，用于表达模型中特定涵义信息，比如：DIM代表维度，FACT代表事实等，以下部分关键字是FML中所特有的。

```text
PATH   MONTH   CREATE   GROUPS   BETWEEN   REL_INDICATOR
FLOOR   YEAR   INCREASE   PARTITION   DQC_RULE   INCLUDE
CONSOLIDATED   INNER   DWS   LEFT   BIGINT   CUBE
WHERE   LAYERS   AS   BUSINESS_CATEGORIES   VARCHAR   SOURCE
THEN   KEY   ATTRIBUTES   ORDINALITY   ALTER   CALL
DOMAIN   INTO   SET   INDICATOR   DECREASE   RENDER
FACT   CONSTRAINT   BATCHES   RLIKE   PRECISION   DIMENSIONS
GROUP   ASC   DELETE   UNIONTYPE   BY   CUSTOM
OFFSET   NAMING   DOMAINS   TINYINT   INTERVAL   ENGINE
MEASURE_UNIT   DIM   BERNOULLI   DIV   REF   PERCENT
SETS   SUBJECT   STRING   TO   RULES   UNION
TRUNCATE   SYSTEM   TARGET   ADD   PROPERTIES   ACCUMULATING_SNAPSHOT
VIEW   DESC   ADS   STAT_TIME   INDEX   REPLACE
CHECKER   EXTRACT   DISABLE   ATTRIBUTE   OUTPUT   FOR
UNIQUE   CURRENT   FULL   BOOLEAN   USING   LAST
BUSINESS_PROCESS   END   NOVALIDATE   HAVING   SYNC   DICTS
REDUCE   PRESERVE   OVERWRITE   BINARY   COMPOSITE   ADJUNCTS
DROP   REGEXP   NEXT   BATCH   OUTER   COLUMNS
RULE   SHOW   RENAME   FILTER   BUSINESS_PROCESSES   EXISTS
INTERSECT   WITH   OVER   DATETIME   BUSINESS_UNITS   REDUNDANT
VALIDATE   FALSE   DEFAULT   TARGET_TYPE   STRONG   JOIN
EXPORT   UNNEST   ENFORCED   MEASURE_UNITS   TABLE   WHEN
QUARTER   INDICATORS   AGGREGATE   ELSE   FACTLESS   CLUSTER
TYPE   IF   CHECKERS   CAST   ENUM   MARKET
IN   DIM_ATTRIBUTES   RELY   DISTINCT   IS   LEVEL
CASE   MATERIALIZED   CHECK   MAP   DISTRIBUTE   MARKETS
SEMI   CHAR   TRANSACTION   IGNORE   COMMENT   TABLESAMPLE
URL   WEAK   ORDER   IMPORT   RIGHT   VALUES
TIME_PERIOD   DOUBLE   FETCH   USE   ADJUNCT   CORRELATION
COPY   FIRST   SELECT   WINDOW   TABLES   DYNAMIC
PRECEDING   DIALECT   LAYER   DAY   NORMAL   SUBJECTS
ALL   ARRAY   ATOMIC   RECURSIVE   SUBSTRING   COLUMN
ALIAS   DECIMAL   ONLY   FROM   PIPE   RESPECT
LATERAL   UNBOUNDED   COLUMN_GROUP   DIMENSION   DICT   TIMESTAMP
MINUTE   TRANSFORM   DESCRIBE   TASK   NULL   TRUE
ENABLE   BUSINESS_UNIT   EXCEPT   SQL   TIME_PERIODS   DERIVATIVE
DATE   ROLLUP   LIKE   PASSWORD   EXCLUDE   AND
SORT   INSERT   ROW   COPY_MODE   CURRENT_DATE   STRUCT
RANGE   FLOAT   CURRENT_TIMESTAMP   TIES   HOUR   LIMIT
ANY   INT   FOLLOWING   NATURAL   CODES   REL_DIMENSION
GROUPING   OF   NORELY   BIZ_DATE   MEASUREMENT   CHANGE
UNSET   WEEK   NULLS   ON   DATE_FIELD   OR
ASYNC   PERIODIC_SNAPSHOT   PRIMARY   USER   ADVANCED   BUSINESS_CATEGORY
DAYOFWEEK   CODE   TIMESTAMPLOCALTZ   CROSS   SMALLINT   PARTITIONED
SECOND   EXP   REFERENCES   ROWS  
```

## 非保留关键字

除了关键字外，对于常用的如建表字段时，FML会抽取部分非保留关键字可以使用。如下：

```text

    LIMIT   TYPE   LAST   LEVEL   SETS   DAY
    ADD   MONTH   DESC   NULLS   WEEK   ASC
    SHOW   UNSET   SEMI   FIRST   SORT   DOW
    RELY   HOUR   IF   CALL   FLOOR   KEY
    YEAR   URL   DWS   CODE   FETCH   RLIKE
    NEXT   ONLY   TIES   FOR   PIPE   SYNC
    ASYNC   COPY   CASE   WHEN   THEN   ELSE
    END   ENUM   MAP   DICT   DICTS   BATCH
    PATH   LAYER   DROP   USE   VIEW   WHERE
    JOIN   CROSS   ORDER   CODES   ALIAS   ANY
    CAST   DIM   FACT   ON   FROM   SQL
    TASK   RULES   RULE   CHECK   EXP   INDEX
    ADS   REF   WEAK   COMPOSITE   ATOMIC   ORDINALITY
    PROCESS   DERIVATIVE   PROCESSES   DOMAIN   DOMAINS   DIALECT
    FULL_BUS   FULL_BU   ADJUNCT   ADJUNCTS   TIMEPERIOD   MEASUREUNIT
    TIMEPERIODS   INDICATOR   INDICATORS   MEASUREUNITS   BATCHES   COLGROUP
    MEASUREMENT   ATTRIBUTE   PARTITIONED   CORRELATION   INCLUDE   EXCLUDE
    SUBSTRING   RECURSIVE   SYSTEM   BERNOULLI   COPY_MODE   PASSWORD
    MATERIALIZED   ENGINE   PROPERTIES   OUTPUT   CHECKERS   LAYERS
    DATEFIELD   UNNEST   HAVING   PRESERVE   TABLESAMPLE   PRECISION
    CHECKER   GROUPING   FILTER   EXTRACT   EXCEPT   RESPECT
    INTERVAL   CONSTRAINT   GROUPS   CURRENT   TRANSFORM   IGNORE
    REDUCE   REFERENCES   DISTINCT   DQC_RULE   NAMING   REL_DIMENSION
    REL_INDICATOR   EXPORT   REDUNDANT   UNIQUE   CHANGE   CLUSTER
    COLUMNS   COLUMN   COMMENT   DOUBLE   DATETIME   PARTITION
    DISABLE   DISTRIBUTE   ENABLE   ENFORCED   TABLES   OFFSET
    MINUTE   OVERWRITE   QUARTER   RENAME   REPLACE   SECOND
    STRING   STRUCT   TINYINT   UNIONTYPE   NORELY   VALIDATE
    NOVALIDATE   DEFAULT   NORMAL   TRANSACTION   AGGREGATE   PERIODIC_SNAPSHOT
    ACCUMULATING_SNAPSHOT   CONSOLIDATED   FACTLESS   SOURCE   PRIMARY   BIZ_DATE
    TARGET   TARGET_TYPE   IMPORT   CUSTOM   BUSINESS_CATEGORIES   BUSINESS_CATEGORY
    DIMENSION   MARKET   SUBJECT   ATTRIBUTES   DIMENSIONS   DIM_ATTRIBUTES
    MARKETS   SUBJECTS   DYNAMIC   RENDER   INCREASE   VARCHAR
    DECREASE   STAT_TIME   IMPORT_SQL   EXPORT_SQL   STRONG   SELECT
    PRECEDING   UNBOUNDED   FOLLOWING   ADVANCED   TIMESTAMPLOCALTZ
```